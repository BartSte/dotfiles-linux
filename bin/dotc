#!/bin/bash
# Mass commit to all dotfiles layers.
# All command line args are concatinated into a commit message

#######################################
# Remove (use -u to show untracked-files) 
# from the sdout
#######################################
shorten_stdout(){
    sed 's/(use -u .*)//'
}

message="'$*'"
common_args="commit --untracked-files=no -a"

echo 'Base:'
base add ~/dotfiles
bases
base $common_args -m "$message" | shorten_stdout

echo $'\nLinux'
lin add ~/dotfiles-linux
lins
lin $common_args -m "$message" | shorten_stdout

echo $'\nSecret'
sec add ~/dotfiles-secret
secs
sec $common_args -m "$message" | shorten_stdout
