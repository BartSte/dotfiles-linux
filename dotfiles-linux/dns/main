#!/bin/bash

# Check if resolvconf is installed
if ! command -v resolvconf &> /dev/null
then
    echo "resolvconf could not be found. Installing..."
    sudo pacman -S --noconfirm resolvconf
else
    echo "resolvconf is already installed."
fi

# Create or update /etc/resolvconf/resolv.conf.d/head
echo "Setting OpenDNS FamilyShield DNS servers..."

sudo mkdir -p /etc/resolvconf/resolv.conf.d
sudo bash -c 'cat > /etc/resolvconf/resolv.conf.d/head <<EOL
nameserver 208.67.222.123
nameserver 208.67.220.123
EOL'

# Apply the changes
echo "Applying DNS settings..."
sudo resolvconf -u

# Verify the DNS settings
echo "Verifying DNS settings..."
cat /etc/resolv.conf

echo "DNS settings have been updated to use OpenDNS FamilyShield."

